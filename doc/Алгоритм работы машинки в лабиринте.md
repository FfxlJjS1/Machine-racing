# Содержание

[Home](Home.md)

# Обзор
Данная заметка описывает принцип работы алгоритма прохождения конкретного лабиринта на 2024 год.

## Начальное описание мероприятия
**Условия лабиринта:**
- Лабиринт не имеет зацикленных путей.
- Попыток не менее двух на одной и той же карте с той же позиции.
- Старт происходит с позиции, где есть только один путь и три стены в квадрате, где машинка повернута к доступному пути движения.
- Финишем считается черный квадрат на полу квадрата.
- Размер квадрата лабиринта 30x30.
- Размер машинки 24x24.
- Код машинки не меняется с начала мероприятия.

## Начальное описание алгоритма
Из-за условия лабиринта получается, что есть всегда только единственный верный путь, который ведет к финишу, а остальные к тупику.

**Поэтому основная задача:** определить в какой последовательности двигаться в определенных позициях (поворотах или тупиках).

Из-за этого нам не нужно хранить весь лабиринт в памяти машинки, а только путь.

Наиболее подходящая структура данных для хранения пути либо односвязный стек, либо двусвязный список.

Временно будет использован односвязный список с его разворотом при прохождении при известном пути.

**Фундаментальные функции машинки:**
- `Определить цвет квадрата`, чтобы определить, дошли ли мы до финиша, или необходимо продолжать искать.
- `Определить тип развилки или тупика`
- `Повернуться на месте на определенный градус`
- `Движение вперед до первой развилки или тупика`, где он остановиться в квадрате с развилками, а не в квадрате до или после развилки.
- `Каллибровка позиции в квадрате`, чтобы машинка сама встала в подходящую позицию в лабиринте для дальнейшего движения.

**Особенности фундаментальных функций машинки:**
- `Определить цвет квадрата` необходимо выполнять только в `Движение вперед до первой развилки или тупика`, при условии, что это первое прохождение, при повторных прохождениях машинка сама остановиться в финишном квадрате

**Есть две главные функции машинки, которые являются входными:**
- `setup` - метод, в котором устанавливаются порты для чтения-записи.
- `loop` - метод, который зациклено работает, при запуске машинки.

Исходя из того, что `loop` зациклен, необходимо определить, когда машинка находиться на паузе, а когда она должна двигаться к финишу.

Из-за того, что алгоритм движения к финишу при первой попытке и остальных отличается, необходимо определить, что это первая попытка или нет.

Также существует особенность того, что движение идет от тупика назад до последней развилки, где остались пути, в которые мы не ходили.

Для того, чтобы убирать из односвязного стека пути, которые ведут к тупику необходимо возврат к последней развилке с путями, где машинка не была, необходимо знать, что мы движемся до подобной развилки.

Также для того, чтобы оптимизировать движение из тупика в другую доступную развилку, было решено на последней развилке с путями, где машинка не была, необходимо сразу поворачивать в эти пути не приходя в состояние, в котором машинка первый раз встретила эту развилку.

## Описание реализации алгоритма
**Реализация состоит из следующих частей:**
1. переменные, константы - область, в которой прописаны коды и константы для работы программы.
2. `setup` функция, в котором определяются пины для работы
3. `loop` функция, в которой происходит движение.

### Переменные и константы
**Переменные:**
1. `steps` - односвязный стек, реализованный через библиотеку Stack.h в Arduino IDE
2. `is_forward`
3. `is_first_start`
4. `is_paused` - булево значение, определяющее, что машинка должна ждать, если значение истинно, и должна искать, если значение ложно.

### setup функция


### loop функция

